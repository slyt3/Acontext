basePath: /api/v1
definitions:
  fileparser.FileContent:
    properties:
      raw:
        description: Raw text content
        type: string
      type:
        description: '"text", "json", "csv", "code"'
        type: string
    type: object
  handler.ConnectToSpaceReq:
    properties:
      space_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        type: string
    required:
    - space_id
    type: object
  handler.CreateBlockReq:
    properties:
      parent_id:
        type: string
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
      type:
        example: text
        type: string
    required:
    - type
    type: object
  handler.CreateSessionReq:
    properties:
      configs:
        additionalProperties: true
        type: object
      space_id:
        example: 123e4567-e89b-12d3-a456-42661417
        format: uuid
        type: string
    type: object
  handler.CreateSpaceReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.GetArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
      content:
        $ref: '#/definitions/fileparser.FileContent'
      public_url:
        type: string
    type: object
  handler.ListArtifactsResp:
    properties:
      artifacts:
        items:
          $ref: '#/definitions/model.Artifact'
        type: array
      directories:
        items:
          type: string
        type: array
    type: object
  handler.MoveBlockReq:
    properties:
      parent_id:
        type: string
      sort:
        type: integer
    type: object
  handler.SendMessageReq:
    properties:
      blob: {}
      format:
        enum:
        - acontext
        - openai
        - anthropic
        example: openai
        type: string
    required:
    - blob
    type: object
  handler.UpdateArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
    type: object
  handler.UpdateBlockPropertiesReq:
    properties:
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
    type: object
  handler.UpdateBlockSortReq:
    properties:
      sort:
        type: integer
    type: object
  handler.UpdateSessionConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.UpdateSpaceConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    required:
    - configs
    type: object
  httpclient.SearchResultBlockItem:
    properties:
      block_id:
        type: string
      distance:
        type: number
      props:
        additionalProperties: true
        type: object
      title:
        type: string
      type:
        type: string
    type: object
  httpclient.SpaceSearchResult:
    properties:
      cited_blocks:
        items:
          $ref: '#/definitions/httpclient.SearchResultBlockItem'
        type: array
      final_answer:
        type: string
    type: object
  model.Artifact:
    properties:
      created_at:
        type: string
      disk_id:
        type: string
      filename:
        type: string
      meta:
        type: object
      path:
        type: string
      updated_at:
        type: string
    type: object
  model.Block:
    properties:
      created_at:
        type: string
      id:
        type: string
      is_archived:
        type: boolean
      parent_id:
        type: string
      props:
        type: object
      sort:
        type: integer
      space_id:
        type: string
      title:
        type: string
      type:
        type: string
      updated_at:
        type: string
    type: object
  model.Disk:
    properties:
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Message:
    properties:
      created_at:
        type: string
      id:
        type: string
      meta:
        type: object
      parent_id:
        type: string
      parts:
        items:
          type: object
        type: array
      role:
        type: string
      session_id:
        type: string
      session_task_process_status:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Session:
    properties:
      configs:
        type: object
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      space_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Space:
    properties:
      configs:
        type: object
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Task:
    properties:
      created_at:
        type: string
      data:
        type: object
      id:
        type: string
      is_planning:
        type: boolean
      order:
        type: integer
      project_id:
        type: string
      session_id:
        type: string
      space_digested:
        type: boolean
      status:
        type: string
      updated_at:
        type: string
    type: object
  serializer.Response:
    properties:
      code:
        type: integer
      data: {}
      error:
        type: string
      msg:
        type: string
    type: object
  service.GetMessagesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Message'
        type: array
      next_cursor:
        type: string
      public_urls:
        additionalProperties:
          $ref: '#/definitions/service.PublicURL'
        description: file_name -> url
        type: object
    type: object
  service.GetTasksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Task'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListDisksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Disk'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSessionsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Session'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSpacesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Space'
        type: array
      next_cursor:
        type: string
    type: object
  service.PublicURL:
    properties:
      expire_at:
        type: string
      url:
        type: string
    type: object
info:
  contact: {}
  description: API for Acontext.
  title: Acontext API
  version: "1.0"
paths:
  /disk:
    get:
      consumes:
      - application/json
      description: List all disks under a project
      parameters:
      - description: Limit of disks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListDisksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List disks
      tags:
      - disk
    post:
      consumes:
      - application/json
      description: Create a disk group under a project
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Disk'
              type: object
      security:
      - BearerAuth: []
      summary: Create disk
      tags:
      - disk
  /disk/{disk_id}:
    delete:
      consumes:
      - application/json
      description: Delete a disk by its UUID
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete disk
      tags:
      - disk
  /disk/{disk_id}/artifact:
    delete:
      consumes:
      - application/json
      description: Delete an artifact by path and filename
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        in: query
        name: file_path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete artifact
      tags:
      - artifact
    get:
      consumes:
      - application/json
      description: Get artifact information by path and filename. Optionally include
        a presigned URL for downloading and parsed file content.
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        in: query
        name: file_path
        required: true
        type: string
      - description: Whether to return public URL, default is true
        in: query
        name: with_public_url
        type: boolean
      - description: Whether to return parsed file content, default is true
        in: query
        name: with_content
        type: boolean
      - description: 'Expire time in seconds for presigned URL (default: 3600)'
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.GetArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get artifact
      tags:
      - artifact
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and create or update an artifact record under a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path in the disk storage (optional, defaults to '/')
        in: formData
        name: file_path
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      - description: Custom metadata as JSON string (optional, system metadata will
          be stored under '__artifact_info__' key)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
      security:
      - BearerAuth: []
      summary: Upsert artifact
      tags:
      - artifact
    put:
      consumes:
      - application/json
      description: Update an artifact's metadata (user-defined metadata only)
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        in: body
        name: file_path
        required: true
        schema:
          type: string
      - description: Custom metadata as JSON string (system metadata '__artifact_info__'
          cannot be modified)
        in: body
        name: meta
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.UpdateArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Update artifact meta
      tags:
      - artifact
  /disk/{disk_id}/artifact/ls:
    get:
      consumes:
      - application/json
      description: List artifacts in a specific path or all artifacts in a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Path filter (optional, defaults to root '/')
        in: query
        name: path
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.ListArtifactsResp'
              type: object
      security:
      - BearerAuth: []
      summary: List artifacts
      tags:
      - artifact
  /session:
    get:
      consumes:
      - application/json
      description: Get all sessions under a project, optionally filtered by space_id
      parameters:
      - description: Space ID to filter sessions
        format: uuid
        in: query
        name: space_id
        type: string
      - description: Filter sessions not connected to any space (default false)
        example: false
        in: query
        name: not_connected
        type: boolean
      - description: Limit of sessions to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSessionsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get sessions
      tags:
      - session
    post:
      consumes:
      - application/json
      description: Create a new session under a space
      parameters:
      - description: CreateSession payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSessionReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Create session
      tags:
      - session
  /session/{session_id}:
    delete:
      consumes:
      - application/json
      description: Delete a session by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete session
      tags:
      - session
  /session/{session_id}/configs:
    get:
      consumes:
      - application/json
      description: Get session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Get session configs
      tags:
      - session
    put:
      consumes:
      - application/json
      description: Update session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: UpdateSessionConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSessionConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update session configs
      tags:
      - session
  /session/{session_id}/connect_to_space:
    post:
      consumes:
      - application/json
      description: Connect a session to a space by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: ConnectToSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.ConnectToSpaceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Connect session to space
      tags:
      - session
  /session/{session_id}/messages:
    get:
      consumes:
      - application/json
      description: Get messages from session. Default format is openai. Can convert
        to acontext (original) or anthropic format.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of messages to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Whether to return asset public url, default is true
        in: query
        name: with_asset_public_url
        type: string
      - description: 'Format to convert messages to: acontext (original), openai (default),
          anthropic.'
        enum:
        - acontext
        - openai
        - anthropic
        in: query
        name: format
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetMessagesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get messages from session
      tags:
      - session
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: 'Supports JSON and multipart/form-data. In multipart mode: the
        payload is a JSON string placed in a form field. The format parameter indicates
        the format of the input message (default: openai, same as GET). The blob field
        should be a complete message object: for openai, use OpenAI ChatCompletionMessageParam
        format (with role and content); for anthropic, use Anthropic MessageParam
        format (with role and content); for acontext (internal), use {role, parts}
        format.'
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: 'SendMessage payload (Content-Type: application/json)'
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.SendMessageReq'
      - description: 'SendMessage payload (Content-Type: multipart/form-data)'
        in: formData
        name: payload
        type: string
      - description: When uploading files, the field name must correspond to parts[*].file_field.
        in: formData
        name: file
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Message'
              type: object
      security:
      - BearerAuth: []
      summary: Send message to session
      tags:
      - session
  /session/{session_id}/task:
    get:
      consumes:
      - application/json
      description: Get tasks from session with cursor-based pagination
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of tasks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetTasksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get tasks from session
      tags:
      - task
  /space:
    get:
      consumes:
      - application/json
      description: Get all spaces under a project
      parameters:
      - description: Limit of spaces to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSpacesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get spaces
      tags:
      - space
    post:
      consumes:
      - application/json
      description: Create a new space under a project
      parameters:
      - description: CreateSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSpaceReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Create space
      tags:
      - space
  /space/{space_id}:
    delete:
      consumes:
      - application/json
      description: Delete a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete space
      tags:
      - space
  /space/{space_id}/block:
    get:
      consumes:
      - application/json
      description: List blocks in a space. Use type query parameter to filter by block
        type (page, folder, text, sop, etc.). Use parent_id query parameter to filter
        by parent. If both type and parent_id are empty, returns top-level pages and
        folders.
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block type
        enum:
        - page
        - folder
        - text
        - sop
        in: query
        name: type
        type: string
      - description: Parent ID
        format: uuid
        in: query
        name: parent_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Block'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: List blocks
      tags:
      - block
    post:
      consumes:
      - application/json
      description: 'Create a new block (supports all types: page, folder, text, sop,
        etc.). For page and folder types, parent_id is optional. For other types,
        parent_id is required.'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: CreateBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateBlockReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Block'
              type: object
      security:
      - BearerAuth: []
      summary: Create block
      tags:
      - block
  /space/{space_id}/block/{block_id}:
    delete:
      consumes:
      - application/json
      description: 'Delete a block by its ID (works for all block types: page, folder,
        text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete block
      tags:
      - block
  /space/{space_id}/block/{block_id}/move:
    put:
      consumes:
      - application/json
      description: Move block by updating its parent_id. Works for all block types
        (page, folder, text, sop, etc.). For page and folder types, parent_id can
        be null (root level).
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: MoveBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.MoveBlockReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Move block
      tags:
      - block
  /space/{space_id}/block/{block_id}/properties:
    get:
      consumes:
      - application/json
      description: 'Get a block''s properties by its ID (works for all block types:
        page, folder, text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Block'
              type: object
      security:
      - BearerAuth: []
      summary: Get block properties
      tags:
      - block
    put:
      consumes:
      - application/json
      description: 'Update a block''s title and properties by its ID (works for all
        block types: page, folder, text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockProperties payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockPropertiesReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block properties
      tags:
      - block
  /space/{space_id}/block/{block_id}/sort:
    put:
      consumes:
      - application/json
      description: 'Update block sort value (works for all block types: page, folder,
        text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockSort payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockSortReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block sort
      tags:
      - block
  /space/{space_id}/configs:
    get:
      consumes:
      - application/json
      description: Retrieve the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Get space configs
      tags:
      - space
    put:
      consumes:
      - application/json
      description: Update the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: UpdateConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSpaceConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update space configs
      tags:
      - space
  /space/{space_id}/experience_search:
    get:
      consumes:
      - application/json
      description: Retrieve the experience search results for a given query within
        a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Search query for page/folder titles
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (1-50, default 10)
        in: query
        name: limit
        type: integer
      - description: 'Search mode: fast or agentic (default fast)'
        in: query
        name: mode
        type: string
      - description: Cosine distance threshold (0=identical, 2=opposite)
        format: float64
        in: query
        name: semantic_threshold
        type: number
      - description: Maximum number of iterations for agentic search (1-100, default
          16)
        in: query
        name: max_iterations
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SpaceSearchResult'
              type: object
      security:
      - BearerAuth: []
      summary: Get experience search
      tags:
      - space
  /space/{space_id}/semantic_global:
    get:
      consumes:
      - application/json
      description: Retrieve the semantic global (glob) search results for page/folder
        titles within a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Search query for page/folder titles
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (1-50, default 10)
        in: query
        name: limit
        type: integer
      - description: Cosine distance threshold (0=identical, 2=opposite)
        format: float64
        in: query
        name: threshold
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/httpclient.SearchResultBlockItem'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Get semantic global
      tags:
      - space
  /space/{space_id}/semantic_grep:
    get:
      consumes:
      - application/json
      description: Retrieve the semantic grep search results for content blocks within
        a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Search query for content blocks
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (1-50, default 10)
        in: query
        name: limit
        type: integer
      - description: Cosine distance threshold (0=identical, 2=opposite)
        format: float64
        in: query
        name: threshold
        type: number
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/httpclient.SearchResultBlockItem'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Get semantic grep
      tags:
      - space
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Project Bearer token (e.g., "Bearer sk-ac-xxxx")
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"

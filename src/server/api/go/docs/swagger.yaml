basePath: /api/v1
definitions:
  fileparser.FileContent:
    properties:
      raw:
        description: Raw text content
        type: string
      type:
        description: '"text", "json", "csv", "code"'
        type: string
    type: object
  handler.ConfirmExperienceReq:
    properties:
      save:
        type: boolean
    required:
    - save
    type: object
  handler.ConnectToSpaceReq:
    properties:
      space_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        type: string
    required:
    - space_id
    type: object
  handler.CreateBlockReq:
    properties:
      parent_id:
        type: string
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
      type:
        example: text
        type: string
    required:
    - type
    type: object
  handler.CreateSessionReq:
    properties:
      configs:
        additionalProperties: true
        type: object
      space_id:
        example: 123e4567-e89b-12d3-a456-42661417
        format: uuid
        type: string
    type: object
  handler.CreateSpaceReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.GetArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
      content:
        $ref: '#/definitions/fileparser.FileContent'
      public_url:
        type: string
    type: object
  handler.ListArtifactsResp:
    properties:
      artifacts:
        items:
          $ref: '#/definitions/model.Artifact'
        type: array
      directories:
        items:
          type: string
        type: array
    type: object
  handler.MoveBlockReq:
    properties:
      parent_id:
        type: string
      sort:
        type: integer
    type: object
  handler.RenameToolNameReq:
    properties:
      rename:
        items:
          $ref: '#/definitions/handler.ToolRenameItem'
        minItems: 1
        type: array
    required:
    - rename
    type: object
  handler.SendMessageReq:
    properties:
      blob: {}
      format:
        enum:
        - acontext
        - openai
        - anthropic
        example: openai
        type: string
    required:
    - blob
    type: object
  handler.TokenCountsResp:
    properties:
      total_tokens:
        type: integer
    type: object
  handler.ToolRenameItem:
    properties:
      new_name:
        type: string
      old_name:
        type: string
    required:
    - new_name
    - old_name
    type: object
  handler.UpdateArtifactReq:
    properties:
      file_path:
        description: File path including filename
        type: string
      meta:
        description: Custom metadata as JSON string
        type: string
    required:
    - file_path
    - meta
    type: object
  handler.UpdateArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
    type: object
  handler.UpdateBlockPropertiesReq:
    properties:
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
    type: object
  handler.UpdateBlockSortReq:
    properties:
      sort:
        type: integer
    type: object
  handler.UpdateSessionConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.UpdateSpaceConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    required:
    - configs
    type: object
  httpclient.FlagResponse:
    properties:
      errmsg:
        type: string
      status:
        type: integer
    type: object
  httpclient.InsertBlockResponse:
    properties:
      id:
        type: string
    type: object
  httpclient.LearningStatusResponse:
    properties:
      not_space_digested_count:
        type: integer
      space_digested_count:
        type: integer
    type: object
  httpclient.SearchResultBlockItem:
    properties:
      block_id:
        type: string
      distance:
        type: number
      props:
        additionalProperties: true
        type: object
      title:
        type: string
      type:
        type: string
    type: object
  httpclient.SpaceSearchResult:
    properties:
      cited_blocks:
        items:
          $ref: '#/definitions/httpclient.SearchResultBlockItem'
        type: array
    type: object
  httpclient.ToolReferenceData:
    properties:
      name:
        type: string
      sop_count:
        type: integer
    type: object
  model.Artifact:
    properties:
      created_at:
        type: string
      disk_id:
        type: string
      filename:
        type: string
      meta:
        type: object
      path:
        type: string
      updated_at:
        type: string
    type: object
  model.Block:
    properties:
      created_at:
        type: string
      id:
        type: string
      is_archived:
        type: boolean
      parent_id:
        type: string
      props:
        type: object
      sort:
        type: integer
      space_id:
        type: string
      title:
        type: string
      type:
        type: string
      updated_at:
        type: string
    type: object
  model.Disk:
    properties:
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  model.ExperienceConfirmation:
    properties:
      created_at:
        type: string
      experience_data:
        type: object
      id:
        type: string
      space_id:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Message:
    properties:
      created_at:
        type: string
      id:
        type: string
      meta:
        type: object
      parent_id:
        type: string
      parts:
        items:
          type: object
        type: array
      role:
        type: string
      session_id:
        type: string
      session_task_process_status:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Session:
    properties:
      configs:
        type: object
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      space_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Space:
    properties:
      configs:
        type: object
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Task:
    properties:
      created_at:
        type: string
      data:
        type: object
      id:
        type: string
      is_planning:
        type: boolean
      order:
        type: integer
      project_id:
        type: string
      session_id:
        type: string
      space_digested:
        type: boolean
      status:
        type: string
      updated_at:
        type: string
    type: object
  serializer.Response:
    properties:
      code:
        type: integer
      error:
        type: string
      msg:
        type: string
    type: object
  service.GetMessagesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Message'
        type: array
      next_cursor:
        type: string
      public_urls:
        additionalProperties:
          $ref: '#/definitions/service.PublicURL'
        description: file_name -> url
        type: object
    type: object
  service.GetTasksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Task'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListDisksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Disk'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListExperienceConfirmationsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.ExperienceConfirmation'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSessionsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Session'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSpacesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Space'
        type: array
      next_cursor:
        type: string
    type: object
  service.PublicURL:
    properties:
      expire_at:
        type: string
      url:
        type: string
    type: object
info:
  contact: {}
  description: API for Acontext.
  title: Acontext API
  version: "1.0"
paths:
  /disk:
    get:
      consumes:
      - application/json
      description: List all disks under a project
      parameters:
      - description: Limit of disks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListDisksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List disks
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List disks
          disks = client.disks.list(limit=10, time_desc=True)
          for disk in disks.items:
              print(f"Disk: {disk.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List disks
          const disks = await client.disks.list({ limit: 10, timeDesc: true });
          for (const disk of disks.items) {
            console.log(`Disk: ${disk.id}`);
          }
    post:
      consumes:
      - application/json
      description: Create a disk group under a project
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Disk'
              type: object
      security:
      - BearerAuth: []
      summary: Create disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a disk
          disk = client.disks.create()
          print(f"Created disk: {disk.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a disk
          const disk = await client.disks.create();
          console.log(`Created disk: ${disk.id}`);
  /disk/{disk_id}:
    delete:
      consumes:
      - application/json
      description: Delete a disk by its UUID
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a disk
          client.disks.delete(disk_id='disk-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a disk
          await client.disks.delete('disk-uuid');
  /disk/{disk_id}/artifact:
    delete:
      consumes:
      - application/json
      description: Delete an artifact by path and filename
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        in: query
        name: file_path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete an artifact
          client.disks.delete_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf'
          )
          print('Artifact deleted successfully')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete an artifact
          await client.disks.deleteArtifact('disk-uuid', {
            filePath: '/documents/report.pdf'
          });
          console.log('Artifact deleted successfully');
    get:
      consumes:
      - application/json
      description: Get artifact information by path and filename. Optionally include
        a presigned URL for downloading and parsed file content.
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        in: query
        name: file_path
        required: true
        type: string
      - description: Whether to return public URL, default is true
        in: query
        name: with_public_url
        type: boolean
      - description: Whether to return parsed file content, default is true
        in: query
        name: with_content
        type: boolean
      - description: 'Expire time in seconds for presigned URL (default: 3600)'
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.GetArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get artifact information
          artifact_info = client.disks.get_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              with_public_url=True,
              with_content=True,
              expire=3600
          )
          print(f"Artifact: {artifact_info.artifact.filename}")
          if artifact_info.public_url:
              print(f"Download URL: {artifact_info.public_url}")
          if artifact_info.content:
              print(f"Content: {artifact_info.content.text[:100]}...")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get artifact information
          const artifactInfo = await client.disks.getArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            withPublicUrl: true,
            withContent: true,
            expire: 3600
          });
          console.log(`Artifact: ${artifactInfo.artifact.filename}`);
          if (artifactInfo.publicUrl) {
            console.log(`Download URL: ${artifactInfo.publicUrl}`);
          }
          if (artifactInfo.content) {
            console.log(`Content: ${artifactInfo.content.text.substring(0, 100)}...`);
          }
    post:
      consumes:
      - multipart/form-data
      description: Upload a file and create or update an artifact record under a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path in the disk storage (optional, defaults to '/')
        in: formData
        name: file_path
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      - description: Custom metadata as JSON string (optional, system metadata will
          be stored under '__artifact_info__' key)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
      security:
      - BearerAuth: []
      summary: Upsert artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Upload a file to disk
          with open('report.pdf', 'rb') as f:
              artifact = client.disks.upload_artifact(
                  disk_id='disk-uuid',
                  file=f,
                  file_path='/documents/',
                  meta={'category': 'reports', 'year': 2024}
              )
          print(f"Uploaded artifact: {artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';
          import fs from 'fs';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload a file to disk
          const fileBuffer = fs.readFileSync('report.pdf');
          const artifact = await client.disks.uploadArtifact('disk-uuid', {
            file: fileBuffer,
            filePath: '/documents/',
            meta: { category: 'reports', year: 2024 }
          });
          console.log(`Uploaded artifact: ${artifact.id}`);
    put:
      consumes:
      - application/json
      description: Update an artifact's metadata (user-defined metadata only)
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Update artifact request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateArtifactReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.UpdateArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Update artifact meta
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update artifact metadata
          artifact = client.disks.update_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              meta={'category': 'updated', 'reviewed': True, 'version': 2}
          )
          print(f"Updated artifact: {artifact.artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update artifact metadata
          const artifact = await client.disks.updateArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            meta: { category: 'updated', reviewed: true, version: 2 }
          });
          console.log(`Updated artifact: ${artifact.artifact.id}`);
  /disk/{disk_id}/artifact/ls:
    get:
      consumes:
      - application/json
      description: List artifacts in a specific path or all artifacts in a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Path filter (optional, defaults to root '/')
        in: query
        name: path
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.ListArtifactsResp'
              type: object
      security:
      - BearerAuth: []
      summary: List artifacts
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List artifacts in a path
          result = client.disks.list_artifacts(
              disk_id='disk-uuid',
              path='/documents/'
          )
          print(f"Found {len(result.artifacts)} artifacts")
          for artifact in result.artifacts:
              print(f"  - {artifact.path}{artifact.filename}")
          print(f"Subdirectories: {', '.join(result.directories)}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List artifacts in a path
          const result = await client.disks.listArtifacts('disk-uuid', {
            path: '/documents/'
          });
          console.log(`Found ${result.artifacts.length} artifacts`);
          for (const artifact of result.artifacts) {
            console.log(`  - ${artifact.path}${artifact.filename}`);
          }
          console.log(`Subdirectories: ${result.directories.join(', ')}`);
  /session:
    get:
      consumes:
      - application/json
      description: Get all sessions under a project, optionally filtered by space_id
      parameters:
      - description: Space ID to filter sessions
        format: uuid
        in: query
        name: space_id
        type: string
      - description: Filter sessions not connected to any space (default false)
        example: false
        in: query
        name: not_connected
        type: boolean
      - description: Limit of sessions to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSessionsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get sessions
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List sessions
          sessions = client.sessions.list(
              space_id='space-uuid',
              limit=20,
              time_desc=True
          )
          for session in sessions.items:
              print(f"{session.id}: {session.space_id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List sessions
          const sessions = await client.sessions.list({
            spaceId: 'space-uuid',
            limit: 20,
            timeDesc: true
          });
          for (const session of sessions.items) {
            console.log(`${session.id}: ${session.space_id}`);
          }
    post:
      consumes:
      - application/json
      description: Create a new session under a space
      parameters:
      - description: CreateSession payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSessionReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Create session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a session
          session = client.sessions.create(
              space_id='space-uuid',
              configs={"mode": "chat"}
          )
          print(f"Created session: {session.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a session
          const session = await client.sessions.create({
            spaceId: 'space-uuid',
            configs: { mode: 'chat' }
          });
          console.log(`Created session: ${session.id}`);
  /session/{session_id}:
    delete:
      consumes:
      - application/json
      description: Delete a session by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a session
          client.sessions.delete(session_id='session-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a session
          await client.sessions.delete('session-uuid');
  /session/{session_id}/configs:
    get:
      consumes:
      - application/json
      description: Get session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Get session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get session configs
          session = client.sessions.get_configs(session_id='session-uuid')
          print(session.configs)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get session configs
          const session = await client.sessions.getConfigs('session-uuid');
          console.log(session.configs);
    put:
      consumes:
      - application/json
      description: Update session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: UpdateSessionConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSessionConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update session configs
          client.sessions.update_configs(
              session_id='session-uuid',
              configs={"mode": "updated-mode"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update session configs
          await client.sessions.updateConfigs('session-uuid', {
            configs: { mode: 'updated-mode' }
          });
  /session/{session_id}/connect_to_space:
    post:
      consumes:
      - application/json
      description: Connect a session to a space by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: ConnectToSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.ConnectToSpaceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Connect session to space
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Connect session to space
          client.sessions.connect_to_space(
              session_id='session-uuid',
              space_id='space-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Connect session to space
          await client.sessions.connectToSpace('session-uuid', {
            spaceId: 'space-uuid'
          });
  /session/{session_id}/flush:
    post:
      consumes:
      - application/json
      description: Flush the session buffer for a given session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Flush session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Flush session buffer
          result = client.sessions.flush(session_id='session-uuid')
          print(result.status)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Flush session buffer
          const result = await client.sessions.flush('session-uuid');
          console.log(result.status);
  /session/{session_id}/get_learning_status:
    get:
      consumes:
      - application/json
      description: Get learning status for a session. Returns the count of space digested
        tasks and not space digested tasks. If the session is not connected to a space,
        returns 0 and 0.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.LearningStatusResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Get learning status
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get learning status
          result = client.sessions.get_learning_status(session_id='session-uuid')
          print(f"Space digested: {result.space_digested_count}, Not digested: {result.not_space_digested_count}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get learning status
          const result = await client.sessions.getLearningStatus('session-uuid');
          console.log(`Space digested: ${result.space_digested_count}, Not digested: ${result.not_space_digested_count}`);
  /session/{session_id}/messages:
    get:
      consumes:
      - application/json
      description: Get messages from session. Default format is openai. Can convert
        to acontext (original) or anthropic format.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of messages to return. Max 200. If limit is 0 or not provided,
          all messages will be returned.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Whether to return asset public url, default is true
        in: query
        name: with_asset_public_url
        type: string
      - description: 'Format to convert messages to: acontext (original), openai (default),
          anthropic.'
        enum:
        - acontext
        - openai
        - anthropic
        in: query
        name: format
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetMessagesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get messages from session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get messages from session
          messages = client.sessions.get_messages(
              session_id='session-uuid',
              limit=50,
              format='acontext',
              time_desc=True
          )
          for message in messages.items:
              print(f"{message.role}: {message.parts}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get messages from session
          const messages = await client.sessions.getMessages('session-uuid', {
            limit: 50,
            format: 'acontext',
            timeDesc: true
          });
          for (const message of messages.items) {
            console.log(`${message.role}: ${JSON.stringify(message.parts)}`);
          }
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: 'Supports JSON and multipart/form-data. In multipart mode: the
        payload is a JSON string placed in a form field. The format parameter indicates
        the format of the input message (default: openai, same as GET). The blob field
        should be a complete message object: for openai, use OpenAI ChatCompletionMessageParam
        format (with role and content); for anthropic, use Anthropic MessageParam
        format (with role and content); for acontext (internal), use {role, parts}
        format.'
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: 'SendMessage payload (Content-Type: application/json)'
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.SendMessageReq'
      - description: 'SendMessage payload (Content-Type: multipart/form-data)'
        in: formData
        name: payload
        type: string
      - description: When uploading files, the field name must correspond to parts[*].file_field.
        in: formData
        name: file
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Message'
              type: object
      security:
      - BearerAuth: []
      summary: Send message to session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient
          from acontext.messages import build_acontext_message

          client = AcontextClient(api_key='sk_project_token')

          # Send a message in Acontext format
          message = build_acontext_message(role='user', parts=['Hello!'])
          client.sessions.send_message(
              session_id='session-uuid',
              blob=message,
              format='acontext'
          )

          # Send a message in OpenAI format
          openai_message = {'role': 'user', 'content': 'Hello from OpenAI format!'}
          client.sessions.send_message(
              session_id='session-uuid',
              blob=openai_message,
              format='openai'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient, MessagePart } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Send a message in Acontext format
          await client.sessions.sendMessage(
            'session-uuid',
            {
              role: 'user',
              parts: [MessagePart.textPart('Hello!')]
            },
            { format: 'acontext' }
          );

          // Send a message in OpenAI format
          await client.sessions.sendMessage(
            'session-uuid',
            {
              role: 'user',
              content: 'Hello from OpenAI format!'
            },
            { format: 'openai' }
          );
  /session/{session_id}/task:
    get:
      consumes:
      - application/json
      description: Get tasks from session with cursor-based pagination
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of tasks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetTasksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get tasks from session
      tags:
      - task
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get tasks from a session
          tasks = client.sessions.get_tasks(
              session_id='session-uuid',
              limit=20,
              time_desc=False
          )
          print(f"Found {len(tasks.items)} tasks")
          for task in tasks.items:
              print(f"Task {task.id}: {task.status}")

          # If there are more tasks, use the cursor for pagination
          if tasks.has_more:
              next_tasks = client.sessions.get_tasks(
                  session_id='session-uuid',
                  limit=20,
                  cursor=tasks.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get tasks from a session
          const tasks = await client.sessions.getTasks('session-uuid', {
            limit: 20,
            timeDesc: false
          });
          console.log(`Found ${tasks.items.length} tasks`);
          for (const task of tasks.items) {
            console.log(`Task ${task.id}: ${task.status}`);
          }

          // If there are more tasks, use the cursor for pagination
          if (tasks.hasMore) {
            const nextTasks = await client.sessions.getTasks('session-uuid', {
              limit: 20,
              cursor: tasks.nextCursor
            });
          }
  /session/{session_id}/token_counts:
    get:
      consumes:
      - application/json
      description: Get total token counts for all text and tool-call parts in a session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.TokenCountsResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get token counts for session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get token counts
          result = client.sessions.get_token_counts(session_id='session-uuid')
          print(f"Total tokens: {result.total_tokens}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get token counts
          const result = await client.sessions.getTokenCounts('session-uuid');
          console.log(`Total tokens: ${result.total_tokens}`);
  /space:
    get:
      consumes:
      - application/json
      description: Get all spaces under a project
      parameters:
      - description: Limit of spaces to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSpacesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get spaces
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List spaces
          spaces = client.spaces.list(limit=20, time_desc=True)
          for space in spaces.items:
              print(f"{space.id}: {space.configs}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List spaces
          const spaces = await client.spaces.list({ limit: 20, timeDesc: true });
          for (const space of spaces.items) {
            console.log(`${space.id}: ${JSON.stringify(space.configs)}`);
          }
    post:
      consumes:
      - application/json
      description: Create a new space under a project
      parameters:
      - description: CreateSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSpaceReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Create space
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a space
          space = client.spaces.create(configs={"name": "My Space"})
          print(f"Created space: {space.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a space
          const space = await client.spaces.create({ configs: { name: 'My Space' } });
          console.log(`Created space: ${space.id}`);
  /space/{space_id}:
    delete:
      consumes:
      - application/json
      description: Delete a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete space
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a space
          client.spaces.delete(space_id='space-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a space
          await client.spaces.delete('space-uuid');
  /space/{space_id}/block:
    get:
      consumes:
      - application/json
      description: List blocks in a space. Use type query parameter to filter by block
        type (page, folder, text, sop, etc.). Use parent_id query parameter to filter
        by parent. If both type and parent_id are empty, returns top-level pages and
        folders.
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block type
        enum:
        - page
        - folder
        - text
        - sop
        in: query
        name: type
        type: string
      - description: Parent ID
        format: uuid
        in: query
        name: parent_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Block'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: List blocks
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List blocks
          blocks = client.blocks.list(
              space_id='space-uuid',
              parent_id='parent-uuid',
              block_type='page'
          )
          for block in blocks:
              print(f"{block.id}: {block.title}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List blocks
          const blocks = await client.blocks.list('space-uuid', {
            parentId: 'parent-uuid',
            type: 'page'
          });
          for (const block of blocks) {
            console.log(`${block.id}: ${block.title}`);
          }
    post:
      consumes:
      - application/json
      description: 'Create a new block (supports all types: page, folder, text, sop,
        etc.). For page and folder types, parent_id is optional. For other types,
        parent_id is required.'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: CreateBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateBlockReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.InsertBlockResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Create block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a page
          page = client.blocks.create(
              space_id='space-uuid',
              block_type='page',
              title='My Page'
          )

          # Create a text block under the page
          text_block = client.blocks.create(
              space_id='space-uuid',
              parent_id=page['id'],
              block_type='text',
              title='Content',
              props={"text": "Block content here"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a page
          const page = await client.blocks.create('space-uuid', {
            blockType: 'page',
            title: 'My Page'
          });

          // Create a text block under the page
          const textBlock = await client.blocks.create('space-uuid', {
            parentId: page.id,
            blockType: 'text',
            title: 'Content',
            props: { text: 'Block content here' }
          });
  /space/{space_id}/block/{block_id}:
    delete:
      consumes:
      - application/json
      description: 'Delete a block by its ID (works for all block types: page, folder,
        text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a block
          client.blocks.delete(space_id='space-uuid', block_id='block-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a block
          await client.blocks.delete('space-uuid', 'block-uuid');
  /space/{space_id}/block/{block_id}/move:
    put:
      consumes:
      - application/json
      description: Move block by updating its parent_id. Works for all block types
        (page, folder, text, sop, etc.). For page and folder types, parent_id can
        be null (root level).
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: MoveBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.MoveBlockReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Move block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Move block to a different parent
          client.blocks.move(
              space_id='space-uuid',
              block_id='block-uuid',
              parent_id='new-parent-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Move block to a different parent
          await client.blocks.move('space-uuid', 'block-uuid', {
            parentId: 'new-parent-uuid'
          });
  /space/{space_id}/block/{block_id}/properties:
    get:
      consumes:
      - application/json
      description: 'Get a block''s properties by its ID (works for all block types:
        page, folder, text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Block'
              type: object
      security:
      - BearerAuth: []
      summary: Get block properties
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get block properties
          block = client.blocks.get_properties(
              space_id='space-uuid',
              block_id='block-uuid'
          )
          print(f"{block.title}: {block.props}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get block properties
          const block = await client.blocks.getProperties('space-uuid', 'block-uuid');
          console.log(`${block.title}: ${JSON.stringify(block.props)}`);
    put:
      consumes:
      - application/json
      description: 'Update a block''s title and properties by its ID (works for all
        block types: page, folder, text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockProperties payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockPropertiesReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block properties
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update block properties
          client.blocks.update_properties(
              space_id='space-uuid',
              block_id='block-uuid',
              title='Updated Title',
              props={"text": "Updated content"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update block properties
          await client.blocks.updateProperties('space-uuid', 'block-uuid', {
            title: 'Updated Title',
            props: { text: 'Updated content' }
          });
  /space/{space_id}/block/{block_id}/sort:
    put:
      consumes:
      - application/json
      description: 'Update block sort value (works for all block types: page, folder,
        text, sop, etc.)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockSort payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockSortReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block sort
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update block sort order
          client.blocks.update_sort(
              space_id='space-uuid',
              block_id='block-uuid',
              sort=5
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update block sort order
          await client.blocks.updateSort('space-uuid', 'block-uuid', {
            sort: 5
          });
  /space/{space_id}/configs:
    get:
      consumes:
      - application/json
      description: Retrieve the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Get space configs
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get space configs
          space = client.spaces.get_configs(space_id='space-uuid')
          print(space.configs)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get space configs
          const space = await client.spaces.getConfigs('space-uuid');
          console.log(space.configs);
    put:
      consumes:
      - application/json
      description: Update the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: UpdateConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSpaceConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update space configs
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update space configs
          client.spaces.update_configs(
              space_id='space-uuid',
              configs={"name": "Updated Name", "description": "New description"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update space configs
          await client.spaces.updateConfigs('space-uuid', {
            configs: { name: 'Updated Name', description: 'New description' }
          });
  /space/{space_id}/experience_confirmations:
    get:
      consumes:
      - application/json
      description: Get all experience confirmations in a space with cursor-based pagination
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Limit of confirmations to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListExperienceConfirmationsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get experience confirmations
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get unconfirmed experiences
          experiences = client.spaces.get_unconfirmed_experiences(
              space_id='space-uuid',
              limit=20,
              time_desc=True
          )
          for experience in experiences.items:
              print(f"{experience.id}: {experience.experience_data}")

          # If there are more, use the cursor for pagination
          if experiences.has_more:
              next_experiences = client.spaces.get_unconfirmed_experiences(
                  space_id='space-uuid',
                  limit=20,
                  cursor=experiences.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get unconfirmed experiences
          const experiences = await client.spaces.getUnconfirmedExperiences('space-uuid', {
            limit: 20,
            timeDesc: true
          });
          for (const experience of experiences.items) {
            console.log(`${experience.id}: ${JSON.stringify(experience.experience_data)}`);
          }

          // If there are more, use the cursor for pagination
          if (experiences.hasMore) {
            const nextExperiences = await client.spaces.getUnconfirmedExperiences('space-uuid', {
              limit: 20,
              cursor: experiences.nextCursor
            });
          }
  /space/{space_id}/experience_confirmations/{experience_id}:
    patch:
      consumes:
      - application/json
      description: 'Confirm an experience confirmation. If save is false, delete the
        row. If save is true, get the data first (TODO: process data), then delete
        the row.'
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Experience Confirmation ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: experience_id
        required: true
        type: string
      - description: Confirmation request with save flag
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ConfirmExperienceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.ExperienceConfirmation'
              type: object
      security:
      - BearerAuth: []
      summary: Confirm experience
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Confirm experience and save data
          confirmation = client.spaces.confirm_experience(
              space_id='space-uuid',
              experience_id='experience-uuid',
              save=True
          )
          print(f"Saved confirmation: {confirmation.experience_data}")

          # Confirm experience without saving (just delete)
          client.spaces.confirm_experience(
              space_id='space-uuid',
              experience_id='experience-uuid',
              save=False
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Confirm experience and save data
          const confirmation = await client.spaces.confirmExperience('space-uuid', 'experience-uuid', {
            save: true
          });
          console.log(`Saved confirmation: ${JSON.stringify(confirmation.experience_data)}`);

          // Confirm experience without saving (just delete)
          await client.spaces.confirmExperience('space-uuid', 'experience-uuid', {
            save: false
          });
  /space/{space_id}/experience_search:
    get:
      consumes:
      - application/json
      description: Retrieve the experience search results for a given query within
        a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Search query for page/folder titles
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (1-50, default 10)
        in: query
        name: limit
        type: integer
      - description: 'Search mode: fast or agentic (default fast)'
        in: query
        name: mode
        type: string
      - description: Cosine distance threshold (0=identical, 2=opposite)
        format: float64
        in: query
        name: semantic_threshold
        type: number
      - description: Maximum number of iterations for agentic search (1-100, default
          16)
        in: query
        name: max_iterations
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SpaceSearchResult'
              type: object
      security:
      - BearerAuth: []
      summary: Get experience search
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Experience search
          result = client.spaces.experience_search(
              space_id='space-uuid',
              query='How to implement authentication?',
              limit=10,
              mode='agentic',
              max_iterations=20
          )
          for block in result.cited_blocks:
              print(f"{block.title} (distance: {block.distance})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Experience search
          const result = await client.spaces.experienceSearch('space-uuid', {
            query: 'How to implement authentication?',
            limit: 10,
            mode: 'agentic',
            maxIterations: 20
          });
          for (const block of result.cited_blocks) {
            console.log(`${block.title} (distance: ${block.distance})`);
          }
  /tool/name:
    get:
      consumes:
      - application/json
      description: Get all tool names within a project
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/httpclient.ToolReferenceData'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Get tool names
      tags:
      - tool
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get all tool names
          tools = client.tools.list()
          for tool in tools:
              print(f"{tool.name}: {tool.sop_count} SOPs")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get all tool names
          const tools = await client.tools.list();
          for (const tool of tools) {
            console.log(`${tool.name}: ${tool.sop_count} SOPs`);
          }
    put:
      consumes:
      - application/json
      description: Rename one or more tool names within a project
      parameters:
      - description: Tool rename request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.RenameToolNameReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Rename tool names
      tags:
      - tool
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Rename tool names
          result = client.tools.rename([
              {"old_name": "old_tool_name", "new_name": "new_tool_name"}
          ])
          print(result.status)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Rename tool names
          const result = await client.tools.rename([
            { oldName: 'old_tool_name', newName: 'new_tool_name' }
          ]);
          console.log(result.status);
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Project Bearer token (e.g., "Bearer sk-ac-xxxx")
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
